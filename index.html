<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Memorial Park Pickleball Court Camera</title>
  <style>
    html, body {
      background: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      margin: 0;
    }
    .wrap {
      max-width: 1400px;
      margin: 0 auto;
      text-align: center;
      padding: 16px;
    }
    h1 { margin: 12px 0 16px; }
    #snapshot {
      width: 90%;            /* or 100% for full width */
      max-width: 1000px;     /* cap on large monitors */
      height: auto;
      border: 4px solid #444;
      border-radius: 8px;
      display: block;
      margin: 0 auto;
    }
    .note { color: #bbb; margin-top: 8px; }
  </style>

  <script>
    // ---- CHANGE THIS PASSWORD ----
    const CORRECT_PASSWORD = "pickleball123";

    // Only prompt if not already validated in this tab
    (function authGate() {
      if (sessionStorage.getItem("pbAuthOK") === "1") return;

      const entered = prompt("Enter password to view the camera:");
      if (entered !== CORRECT_PASSWORD) {
        document.write("<h1 style='color:white;text-align:center;margin-top:50px;'>Access Denied</h1>");
        throw new Error("Unauthorized");
      }
      sessionStorage.setItem("pbAuthOK", "1");
    })();
  </script>
</head>
<body>
  <div class="wrap">
    <h1>Pickleball Court Camera</h1>
    <div id="imageContainer"></div>
    <div class="note">Image updates automatically every 120 seconds.</div>
  </div>

  <script>
    // Only load the image if authorized
    if (sessionStorage.getItem("pbAuthOK") === "1") {
      const img = document.createElement("img");
      img.id = "snapshot";
      img.src = "snapshot.jpg";
      document.getElementById("imageContainer").appendChild(img);

      // Refresh image every 60 seconds with a cache-busting query param
      setInterval(() => {
        img.src = "snapshot.jpg?t=" + Date.now();
      }, 60000);
    }
  </script>
</body>
</html>
